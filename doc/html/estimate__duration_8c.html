<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mdptetris: src/estimate_duration.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mdptetris
   &#160;<span id="projectnumber">1.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">estimate_duration.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;gsl/gsl_fit.h&gt;</code><br />
<code>#include &quot;config.h&quot;</code><br />
<code>#include &quot;<a class="el" href="estimate__duration_8h.html">estimate_duration.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="feature__policy_8h.html">feature_policy.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="macros_8h.html">macros.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5daebf801dca92ffcd05d4c2c2f761b8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="estimate__duration_8c.html#a5daebf801dca92ffcd05d4c2c2f761b8">FIT_FIRST_HEIGHT</a>&#160;&#160;&#160;7</td></tr>
<tr class="separator:a5daebf801dca92ffcd05d4c2c2f761b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d9e00dd73b0e1596f7c1f1892fb94bd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="estimate__duration_8c.html#a0d9e00dd73b0e1596f7c1f1892fb94bd">FIT_LAST_HEIGHT</a>&#160;&#160;&#160;15</td></tr>
<tr class="separator:a0d9e00dd73b0e1596f7c1f1892fb94bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a187a87fee7f4477151dd99980a125877"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="estimate__duration_8c.html#a187a87fee7f4477151dd99980a125877">play_moves_estimate_duration</a> (<a class="el" href="structGame.html">Game</a> *game, const <a class="el" href="structFeaturePolicy.html">FeaturePolicy</a> *feature_policy, int nb_moves, FILE *out)</td></tr>
<tr class="memdesc:a187a87fee7f4477151dd99980a125877"><td class="mdescLeft">&#160;</td><td class="mdescRight">Plays moves with some strategy and estimates the probability of reaching each wall height.  <a href="estimate__duration_8c.html#a187a87fee7f4477151dd99980a125877">More...</a><br /></td></tr>
<tr class="separator:a187a87fee7f4477151dd99980a125877"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a5daebf801dca92ffcd05d4c2c2f761b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5daebf801dca92ffcd05d4c2c2f761b8">&#9670;&nbsp;</a></span>FIT_FIRST_HEIGHT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FIT_FIRST_HEIGHT&#160;&#160;&#160;7</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0d9e00dd73b0e1596f7c1f1892fb94bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d9e00dd73b0e1596f7c1f1892fb94bd">&#9670;&nbsp;</a></span>FIT_LAST_HEIGHT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FIT_LAST_HEIGHT&#160;&#160;&#160;15</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a187a87fee7f4477151dd99980a125877"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a187a87fee7f4477151dd99980a125877">&#9670;&nbsp;</a></span>play_moves_estimate_duration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double play_moves_estimate_duration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structGame.html">Game</a> *&#160;</td>
          <td class="paramname"><em>game</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structFeaturePolicy.html">FeaturePolicy</a> *&#160;</td>
          <td class="paramname"><em>feature_policy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nb_moves</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Plays moves with some strategy and estimates the probability of reaching each wall height. </p>
<p>A simple executable to play some moves with a given feature policy file, and to estimate the probability of losing from this sample of moves.</p>
<p>The number of moves specified are played, in one or several games. During the game(s), we count the number of times each wall height is reached. Then, a fitting is made to estimate the probability of reaching the game over height. The value returned is the estimated mean game duration, i.e. the inverse of this probability. Thus, the game duration can be estimated precisely even if there was no game over during the moves.</p>
<p>Note that the estimated duration is lower than the real mean duration when the strategy avoids game over actions or when the strategy gives a special value to the game over states. However, even in such cases, the value returned is a good heuristic to compare different policies.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">game</td><td>an initialized <a class="el" href="structGame.html" title="A game.">Game</a> object </td></tr>
    <tr><td class="paramname">feature_policy</td><td>the policy to be used </td></tr>
    <tr><td class="paramname">nb_moves</td><td>the number of moves to play (if the game is over before the number of moves are played, a new game is played) </td></tr>
    <tr><td class="paramname">out</td><td>a file to print the frequencies (then you can gnuplot them), can be NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an estimation of the game duration, i.e. the mean number of moves before the game is over. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
