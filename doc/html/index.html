<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mdptetris: MdpTetris documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mdptetris
   &#160;<span id="projectnumber">1.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">MdpTetris documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="overview"></a>
Overview</h1>
<p>MdpTetris is a Tetris simulator. The purpose of this project is to develop various Tetris-playing algorithms and compare their performances. This documentation will help you understand how to use the simulator to reproduce our experiments and implement your own algorithms.</p>
<p>To know how to install MdpTetris and use the simulator, first have a look at this page. If you want to implement your own algorithm within the simulator, the <a class="el" href="group__api.html">API</a> and <a class="el" href="group__new__algo.html">this page</a> will help you but you should contact us before.</p>
<h1><a class="anchor" id="installation"></a>
Installation instructions</h1>
<h2><a class="anchor" id="requirements"></a>
Requirements</h2>
<p>To compile MdpTetris, you need a standard Unix environment with of course a C compiler like gcc and the command make. You also need the GSL library (Gnu Scientific Library). Two libraries have to be installed: <code>libgslcblas</code> and <code>libgsl</code>. To do that, if you are using Ubuntu, you just have to install the package <code>libgsl0-dev</code>:</p>
<pre class="fragment">sudo apt-get install libgsl0-dev
</pre><h2><a class="anchor" id="installation"></a>
Installation instructions</h2>
<p>To install MdpTetris, download the latest tarball release available <a href="https://gforge.inria.fr/projects/mdptetris">here</a> and save it into a directory, for example <code>/home/you</code>. Then, uncompress the files and compile the project with the standard Unix procedure:</p>
<pre class="fragment">$ tar xvzf mdptetris-1.2.tar.gz
$ cd mdptetris-1.2
$ ./configure
$ make
# make install
</pre><p>The source files will be uncompressed into <code>/home/you/mdptetris-1.2</code>. The executable binaries will be installed into the default binary directory, usually something like <code>/usr/local/bin</code>.</p>
<p>If you don't have root access, you can install the binaries into your home directory. To do this, type <code>./configure &ndash;prefix=$HOME</code> instead of just <code>./configure</code>. This will install the MdpTetris binaries into <code>/home/you/bin</code> instead of <code>/usr/local/bin</code>. But make sure <code>/home/you/bin</code> is in your <code>$PATH</code> environment variable.</p>
<p>In both cases, you can uninstall MdpTetris with the command <code>make uninstall</code>.</p>
<h1><a class="anchor" id="programs"></a>
Programs</h1>
<p>If the installation succeeds, several binaries are installed. We can organize them in two kinds of programs: those which play some games of Tetris with an existing strategy (or policy), and those which compute a strategy.</p>
<h2><a class="anchor" id="programs_playing"></a>
Playing Tetris with an existing policy</h2>
<ul>
<li><b>mdptetris</b>: the main executable of the simulator. It shows an interactive menu to choose the game settings and let the computer play one or several Tetris games with a given strategy.</li>
</ul>
<ul>
<li><b>mdptetris_play_games</b>: a simple non-interactive program to let the computer play some games with the strategy defined in a <a class="el" href="index.html#feature_files">feature file</a>. This program is designed to be launched by a script to run some experiments.</li>
</ul>
<ul>
<li><b>mdptetris_view_game</b>: this tool generates a human-readable output of a game. This game must have been previously played with <code>mdptetris</code> and saved in a file.</li>
</ul>
<h2><a class="anchor" id="programs_computing_policy"></a>
Computing a policy</h2>
<ul>
<li><b>mdptetris_value_iteration</b>: performs the standard Value Iteration algorithm on a reduced Tetris board (5*5). The optimal policy can be obtained this way for the reduced-size problem. For bigger boards such as the standard one (10*20), we must use approximative methods such as those presented below.</li>
</ul>
<ul>
<li><b>mdptetris_lambda_pi</b>: performs the approximate version of Lambda-Policy Iteration [Bertsekas and Tsitsiklis, 1996] and generates a <a class="el" href="index.html#feature_files">feature file</a> representing the best policy obtained.</li>
</ul>
<ul>
<li><b>mdptetris_cross_entropy</b>: performs the noisy cross entropy method [Szita and Lorincz, 2006] and generates a <a class="el" href="index.html#feature_files">feature file</a> representing the best policy obtained.</li>
</ul>
<h1><a class="anchor" id="feature_files"></a>
The feature files</h1>
<p>A feature file defines a Tetris strategy (or policy) based on a linear sum of features. The features are some basis functions such as the wall height, the number of holes, etc. In a given state, all possible actions are tried and they are evaluated with this liner sum of features. The action with the best evaluation is then played.</p>
<p>Thus, a feature file defines what features are used and the value of their weights.</p>
<p>Let's consider an example of feature file. You will find this file in the <code>features</code> subdirectory of the MdpTetris package. It represents the very good Tetris strategy designed by <a href="http://colinfahey.com/tetris/tetris.html">Pierre Dellacherie</a> in 2003.</p>
<pre class="fragment">0
-1
6
1 -1
2 1
3 -1
4 -1
5 -4
6 -1
</pre><p>The first two lines define some various settings about the policy but you don't really need to take care of them for now: </p><ul>
<li>an id representing the reward function (a reward function can be used with some reinforcement learning based policies), </li>
<li>a value indicating how a game over state should be evaluated (-1: -infinite, 0: always zero ; 1: the value computing by the weighted sum of features). If you set this value to -1, the game will finish only if all actions lead to game over.</li>
</ul>
<p>The important part of a feature file is the remaining lines. The next line (i.e. line 3) is the number of features. Then, each line describes a feature and its weight. On a line, the first number is the id of a feature function and the second one is the corresponding weight. Here, we are using features #1, #2, #3, #4, #5 and #6. See the enumeration <a class="el" href="group__feature__policy.html#gaa68dbab637102a8bd63ce214f9c6f2f7">FeatureID</a> for their definition. For example, feature #5 corresponds to the number of holes in the wall, i.e. the number of empty cells recovered by a full cell. Any Tetris player know that the holes are really bad and should be avoided. Here, the holes have a big weight (-4) to penalize them strongly.</p>
<h1><a class="anchor" id="first_run"></a>
Your first run!</h1>
<p>To make you better understand how MdpTetris works, let's play some games with Dellacherie's policy. To do this, we will use the <code>mdptetris_play_games</code> tool. We could also use <code>mdptetris</code>, then we would have got an interactive menu and more options.</p>
<p>Let's launch the command:</p>
<pre class="fragment">mdptetris_play_games
Usage: mdptetris_play_games feature_file nb_games board_width board_height statistics_file [comments]
</pre><p>Obviously, we missed the parameters. We want to play 10 games with Dellacheries' features (<code>features/dellacherie_initial.dat</code>) on a standard board (10 columns and 20 rows). The <code>statistics_file</code> parameter is the name of a file the command will generate. This file is the output of the command, it will contain the scores of all games and some statistical information about them, such as the mean score and the best score. The scores will be also be displayed on the standard output. The last parameter is optional, it is a comment to add at the beginning of the statistics file. So, here is our completed command line:</p>
<pre class="fragment">mdptetris_play_games features/dellacherie_initial.dat 10 10 20 stats
</pre><p>You will first see a message indicating the seed of the random number generator. Then, a score is displayed each time a game is finished. But you have to be patient because Dellacherie's policy is really good, so the games are quite long. However, we have optimized the simulator, and with Dellacherie's policy it completes about 30 000 rows per second (with an Intel Dual Core 3.2 GHz), against 120 rows per second in the original implementation (with an Athlon 1600+).</p>
<p>If you don't want to wait too long, you can also run Dellacherie's policy on a reduced board, such as 10*15:</p>
<pre class="fragment">mdptetris_play_games features/dellacherie_initial.dat 10 10 15 stats
</pre> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
